/**
 * Dark Mode Styles
 * Activated with 'data-theme="dark"' on html element
 */

@media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) {
        /* Update color variables for dark mode */
        --color-background: #0f172a;
        --color-surface: #1a2847;
        --color-surface-muted: #223861;
        --color-surface-alt: #2a3f5f;

        --color-text: #e5e7eb;
        --color-text-muted: #a5b4d0;
        --color-text-soft: #8b95b3;
        --color-heading: #f3f4f6;

        --color-border: #3d4f6e;
        --color-border-strong: #5a6f8f;

        --color-header-bg: #131f38;
        --color-header-text: #f3f4f6;

        --color-primary: #60a5fa;
        --color-primary-strong: #93c5fd;
        --color-primary-soft: #1e3a8a;
        --color-primary-muted: #1e40af;

        --color-accent: #60a5fa;
        --color-accent-strong: #93c5fd;

        --color-navy: #0f172a;
        --color-navy-soft: #1a2847;
        --color-navy-tint: rgba(15, 23, 42, 0.8);

        --color-sky: #60a5fa;
        --color-sky-soft: #1e3a8a;
        --color-sky-tint: rgba(96, 165, 250, 0.1);

        --color-success-bg: #064e3b;
        --color-success-border: #10b981;
        --color-success-text: #6ee7b7;

        --color-error-bg: #7f1d1d;
        --color-error-border: #f87171;
        --color-error-text: #fca5a5;

        --color-warning-bg: #78350f;
        --color-warning-text: #fcd34d;

        --color-focus-ring: rgba(96, 165, 250, 0.3);
    }
}

/* Dark mode toggle (explicit) */
:root[data-theme="dark"] {
    --color-background: #0f172a;
    --color-surface: #1a2847;
    --color-surface-muted: #223861;
    --color-surface-alt: #2a3f5f;

    --color-text: #e5e7eb;
    --color-text-muted: #a5b4d0;
    --color-text-soft: #8b95b3;
    --color-heading: #f3f4f6;

    --color-border: #3d4f6e;
    --color-border-strong: #5a6f8f;

    --color-header-bg: #131f38;
    --color-header-text: #f3f4f6;

    --color-primary: #60a5fa;
    --color-primary-strong: #93c5fd;
    --color-primary-soft: #1e3a8a;
    --color-primary-muted: #1e40af;

    --color-accent: #60a5fa;
    --color-accent-strong: #93c5fd;

    --color-navy: #0f172a;
    --color-navy-soft: #1a2847;
    --color-navy-tint: rgba(15, 23, 42, 0.8);

    --color-sky: #60a5fa;
    --color-sky-soft: #1e3a8a;
    --color-sky-tint: rgba(96, 165, 250, 0.1);

    --color-success-bg: #064e3b;
    --color-success-border: #10b981;
    --color-success-text: #6ee7b7;

    --color-error-bg: #7f1d1d;
    --color-error-border: #f87171;
    --color-error-text: #fca5a5;

    --color-warning-bg: #78350f;
    --color-warning-text: #fcd34d;

    --color-focus-ring: rgba(96, 165, 250, 0.3);
}

/* Light mode (explicit) - override dark preferences */
:root[data-theme="light"] {
    --color-background: #f6f7fb;
    --color-surface: #ffffff;
    --color-surface-muted: #f8fafd;
    --color-surface-alt: #f5f7fc;

    --color-text: #222222;
    --color-text-muted: #5a6570;
    --color-text-soft: #6f7a91;
    --color-heading: #2a2a4a;

    --color-border: #e3e8f1;
    --color-border-strong: #b8c4d8;

    --color-header-bg: #2a2a4a;
    --color-header-text: #ffffff;

    --color-primary: #4c7ad9;
    --color-primary-strong: #2d5bb8;
    --color-primary-soft: #dbe6ff;
    --color-primary-muted: #a9c2ff;

    --color-accent: #2d5bb8;
    --color-accent-strong: #1b3e8c;

    --color-navy: #1f2a44;
    --color-navy-soft: #273352;
    --color-navy-tint: rgba(31, 42, 68, 0.05);

    --color-sky: #4c7ad9;
    --color-sky-soft: #dbe6ff;
    --color-sky-tint: rgba(76, 122, 217, 0.12);

    --color-success-bg: #d7f8e1;
    --color-success-border: #16a765;
    --color-success-text: #146036;

    --color-error-bg: #f9dbdb;
    --color-error-border: #e43737;
    --color-error-text: #a12a2c;

    --color-warning-bg: #fef3c7;
    --color-warning-text: #92400e;

    --color-focus-ring: rgba(52, 152, 219, 0.4);
}

/* Smooth transition when toggling theme */
html.theme-transitioning,
html.theme-transitioning body,
html.theme-transitioning body * {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease !important;
}

/* Dark mode specific styles */
:root[data-theme="dark"] body {
    background-color: var(--color-background);
    color: var(--color-text);
}

/* Image adjustments in dark mode */
:root[data-theme="dark"] img {
    opacity: 0.8;
}

:root[data-theme="dark"] img:hover {
    opacity: 1;
}

/* Table adjustments */
:root[data-theme="dark"] .data-table tbody tr:hover,
:root[data-theme="dark"] .members-table tbody tr:hover,
:root[data-theme="dark"] .stats-table tbody tr:hover {
    background: rgba(96, 165, 250, 0.1);
}

/* Shadow adjustments for dark mode */
:root[data-theme="dark"] {
    --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.3);
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
    --shadow-md: 0 4px 18px rgba(0, 0, 0, 0.5);
    --shadow-lg: 0 8px 40px rgba(0, 0, 0, 0.6);
}

/* Code/pre-formatted text adjustments */
:root[data-theme="dark"] pre {
    background: rgba(0, 0, 0, 0.3);
    border-color: var(--color-border);
}

:root[data-theme="dark"] code {
    background: rgba(0, 0, 0, 0.2);
    color: #93c5fd;
}

/* Input styling adjustments */
:root[data-theme="dark"] input,
:root[data-theme="dark"] select,
:root[data-theme="dark"] textarea {
    background-color: var(--color-surface-muted);
    color: var(--color-text);
    border-color: var(--color-border);
}

:root[data-theme="dark"] input::placeholder,
:root[data-theme="dark"] textarea::placeholder {
    color: var(--color-text-soft);
}

/* Scrollbar styling for dark mode */
:root[data-theme="dark"] ::-webkit-scrollbar-track {
    background: var(--color-surface-muted);
}

:root[data-theme="dark"] ::-webkit-scrollbar-thumb {
    background: var(--color-primary);
    border-radius: 999px;
}

:root[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
    background: var(--color-primary-strong);
}

/* Reduce flashing with prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
    html.theme-transitioning,
    html.theme-transitioning body,
    html.theme-transitioning body * {
        transition: none !important;
    }
}
