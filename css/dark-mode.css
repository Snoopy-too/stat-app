/**
 * Dark Mode Styles
 * Activated with 'data-theme="dark"' on html element
 */

@media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) {
        /* Slate 900 base */
        --color-background: #0f172a;
        --color-surface: #1e293b;
        --color-surface-muted: #334155;
        --color-surface-alt: #1e293b;

        --color-text: #f1f5f9;
        --color-text-muted: #94a3b8;
        --color-text-soft: #64748b;
        --color-heading: #ffffff;

        --color-border: #334155;
        --color-border-strong: #475569;

        --color-header-bg: rgba(15, 23, 42, 0.85);
        --color-header-text: #f8fafc;

        /* Adjust Primary for Dark Mode (Lighter/Brighter) */
        --color-primary: #818cf8;
        /* Indigo 400 */
        --color-primary-strong: #a5b4fc;
        /* Indigo 300 */
        --color-primary-soft: #312e81;
        /* Indigo 900 */
        --color-primary-muted: #3730a3;
        /* Indigo 800 */
        --color-primary-contrast: #ffffff;

        --color-accent: #a78bfa;
        /* Violet 400 */
        --color-accent-strong: #c4b5fd;
        /* Violet 300 */
        --color-accent-soft: #4c1d95;
        /* Violet 900 */

        /* Semantic Colors */
        --color-success-bg: #064e3b;
        /* Emerald 900 */
        --color-success-border: #059669;
        /* Emerald 600 */
        --color-success-text: #6ee7b7;
        /* Emerald 300 */

        --color-error-bg: #7f1d1d;
        /* Red 900 */
        --color-error-border: #dc2626;
        /* Red 600 */
        --color-error-text: #fca5a5;
        /* Red 300 */

        --color-warning-bg: #78350f;
        /* Amber 900 */
        --color-warning-text: #fcd34d;
        /* Amber 300 */

        --color-focus-ring: rgba(129, 140, 248, 0.5);

        /* Shadows */
        --shadow-color: 220 40% 2%;
        --shadow-strength: 25%;

        --shadow-glow: 0 0 20px rgba(129, 140, 248, 0.25);
    }
}

/* Dark mode toggle (explicit) */
:root[data-theme="dark"] {
    --color-background: #0f172a;
    --color-surface: #1e293b;
    --color-surface-muted: #334155;
    --color-surface-alt: #1e293b;

    --color-text: #f1f5f9;
    --color-text-muted: #94a3b8;
    --color-text-soft: #64748b;
    --color-heading: #ffffff;

    --color-border: #334155;
    --color-border-strong: #475569;

    --color-header-bg: rgba(15, 23, 42, 0.85);
    --color-header-text: #f8fafc;

    --color-primary: #818cf8;
    --color-primary-strong: #a5b4fc;
    --color-primary-soft: #312e81;
    --color-primary-muted: #3730a3;
    --color-primary-contrast: #ffffff;

    --color-accent: #a78bfa;
    --color-accent-strong: #c4b5fd;
    --color-accent-soft: #4c1d95;

    --color-success-bg: #064e3b;
    --color-success-border: #059669;
    --color-success-text: #6ee7b7;

    --color-error-bg: #7f1d1d;
    --color-error-border: #dc2626;
    --color-error-text: #fca5a5;

    --color-warning-bg: #78350f;
    --color-warning-text: #fcd34d;

    --color-focus-ring: rgba(129, 140, 248, 0.5);

    --shadow-color: 220 40% 2%;
    --shadow-strength: 25%;

    --shadow-glow: 0 0 20px rgba(129, 140, 248, 0.25);
}

/* Light mode (explicit) - override dark preferences */
:root[data-theme="light"] {
    --color-background: #f8fafc;
    --color-surface: #ffffff;
    --color-surface-muted: #f1f5f9;
    --color-surface-alt: #e2e8f0;

    --color-text: #0f172a;
    --color-text-muted: #475569;
    --color-text-soft: #94a3b8;
    --color-heading: #1e293b;

    --color-border: #e2e8f0;
    --color-border-strong: #cbd5e1;

    --color-header-bg: rgba(255, 255, 255, 0.85);
    --color-header-text: #0f172a;

    --color-primary: #6366f1;
    --color-primary-strong: #4f46e5;
    --color-primary-soft: #e0e7ff;
    --color-primary-muted: #c7d2fe;
    --color-primary-contrast: #ffffff;

    --color-accent: #8b5cf6;
    --color-accent-strong: #7c3aed;
    --color-accent-soft: #ede9fe;

    --color-success-bg: #dcfce7;
    --color-success-border: #10b981;
    --color-success-text: #166534;

    --color-error-bg: #fee2e2;
    --color-error-border: #ef4444;
    --color-error-text: #991b1b;

    --color-warning-bg: #fef3c7;
    --color-warning-text: #92400e;

    --color-focus-ring: rgba(99, 102, 241, 0.4);

    --shadow-color: 220 3% 15%;
    --shadow-strength: 1%;

    --shadow-glow: 0 0 20px rgba(99, 102, 241, 0.15);
}

/* Smooth transition when toggling theme */
html.theme-transitioning,
html.theme-transitioning body,
html.theme-transitioning body * {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease !important;
}

/* Dark mode specific overrides */
:root[data-theme="dark"] body {
    background-color: var(--color-background);
    color: var(--color-text);
}

:root[data-theme="dark"] img {
    opacity: 0.85;
    transition: opacity var(--transition-medium);
}

:root[data-theme="dark"] img:hover {
    opacity: 1;
}

/* Input styling adjustments for dark mode */
:root[data-theme="dark"] input,
:root[data-theme="dark"] select,
:root[data-theme="dark"] textarea {
    background-color: var(--color-surface);
    color: var(--color-text);
    border-color: var(--color-border);
}

:root[data-theme="dark"] input::placeholder,
:root[data-theme="dark"] textarea::placeholder {
    color: var(--color-text-soft);
}

/* Scrollbar styling for dark mode */
:root[data-theme="dark"] ::-webkit-scrollbar-track {
    background: var(--color-surface-muted);
}

:root[data-theme="dark"] ::-webkit-scrollbar-thumb {
    background: var(--color-surface-alt);
    border-radius: 999px;
    border: 2px solid var(--color-surface-muted);
}

:root[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

/* Reduce flashing with prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {

    html.theme-transitioning,
    html.theme-transitioning body,
    html.theme-transitioning body * {
        transition: none !important;
    }
}